
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\documentclass[inzynierska]{pwr_wmat_praca_dyplomowa}
\autor{Michał Cerazy}
\tytul{Tytuł pracy dyplomowej} 
\tytulang{Tytuł pracy dyplomowej w języku angielskim}
\opiekun{dr hab. inż. Krzysztof Burnecki}
\kierunekstudiow{Matematyka stosowana}
\kierunekstudiowang{Applied Mathematics}
\specjalnosc{--} 
\specjalnoscang{--} 
\streszczenie{Tutaj piszemy krótkie streszczenie pracy (nie powinno być dłuższe niż 530 znaków).}
\streszczenieang{Tutaj piszemy krótkie streszczenie pracy w języku angielskim (nie powinno być dłuższe niż 530 znaków).}
\slowakluczowe{tutaj podajemy najważniejsze słowa kluczowe (łącznie nie powinny być dłuższe niż 150 znaków).}  
\slowakluczoweang{tutaj podajemy najważniejsze słowa kluczowe w języku angielskim (łącznie nie powinny być dłuższe niż 150 znaków)}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Definicje, lematy, twierdzenia, przykłady i wnioski
% Komendy wywołujące twierdzenia, definicje, itd., 
% czyli 'theorem', 'definition', 'corollary', itd., 
% można zmienić wedle uznania.
\theoremstyle{plain}
\newtheorem{theorem}{Twierdzenie}
\numberwithin{theorem}{chapter}
\newtheorem{lemma}[theorem]{Lemat} 
\newtheorem{corollary}[theorem]{Wniosek}
\newtheorem{fact}[theorem]{Fakt}
\theoremstyle{definition}
\numberwithin{theorem}{chapter}
\newtheorem{definition}[theorem]{Definicja} 
\newtheorem{example}[theorem]{Przykład}
\newtheorem{note}[theorem]{Uwaga}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{document}
\frontmatter
\maketitle
\mainmatter
\tableofcontents
%\listoffigures
%\listoftables

{\backmatter \chapter{Wstęp}}
%We wstępie zapowiadamy, o czym będzie praca. Próbujemy zachęcić czytelnika do dalszej lektury, np. krótko informując, dlaczego wybraliśmy właśnie ten temat i co nas w nim zainteresowało.
Dzięki powszechnemu dostępowi do internetu i rozpowszechnieniu kultury masowej amerykańska liga koszykarska NBA zyskała popularność na całym świecie, przyciągając do siebie najlepszych graczy i masy fanów. Dzięki nieprzewidywalności i złożoności tego sportu podejmowano wiele prób przewidywania wyników rozgrywek, które często toczyły się inaczej, niż by zakładano (najlepszym tego przykładem może być sezon 2003/2004, kiedy to nisko notowani Detroit Pistons pokonali faworytów w postaci Los Angeles Lakers). Najlepsi analitycy sportowi starają się ?analizować? każdy aspekt gry i jego wpływ na sytuację na boisku, lecz nikt do tej pory nie był w stanie zaproponować skutecznego modelu opisującego przebieg rozgrywek. 
W niniejszej pracy inżynierskiej podjęto próbę przewidzenia rezultatów wybranego sezonu ligi NBA przy pomocy informacji o wynikach poszczególnych drużyn w poprzednich sezonach. 

\chapter{Opis ligi NBA, jak wyglada sezon}
National Basketball Association (NBA) została założona 6 czerwca 1946 roku. Pierwotnie była znana jako Basketball Association of America, a swoją obecną nazwę zyskała w roku 1949, kiedy to wchłonęła rywalizującą National Basketball League. Od 2004 roku w NBA gra 30 zespołów, 29 z USA i 1 z Kanady. Liga podzielona jest na dwie konferencje po 15 drużyn, te natomiast składają się z dywizji po 5 ekip. TU WSTAW OBRAZ Z MAPKĄ!!!!!!!!!!!!!!!!. Nazwy wszystkich drużyn z podziałem na konferencje i dywizje:
%\begin{itemize}
%	\item Konferencja Wschodnia   / do tabeli?
%	\begin{itemize}
%		\item Atlantic Division
%		\begin{itemize}
%			\item Boston Celtics
%			\item Brooklyn Nets
%			\item New York Knicks
%			\item Philadelphia 76ers
%			\item Toronto Raptors
%		\end{itemize}
%		\item Southeast Division
%		\begin{itemize}
%			\item Atlanta Hawks
%			\item Charlotte Hornets
%			\item Miami Heat
%			\item Orlando Magic
%			\item Washington Wizards
%		\end{itemize}
%		\item Central Division
%		\begin{itemize}
%			\item Chicago Bulls
%			\item Cleveland Cavaliers
%			\item Detroit Pistons
%			\item Indiana Pacers
%			\item Milwaukee Bucks
%		\end{itemize}
%	\end{itemize}	
%	\item Konferencja Zachodnia
%	\begin{itemize}
%		\item Northwest Division
%		\begin{itemize}
%			\item Denver Nuggets
%			\item Minnesota Timberwolves
%			\item Oklahoma City Thunder
%			\item Portland Trail Blazers
%			\item Utah Jazz
%		\end{itemize}
%		\item Southwest Division
%		\begin{itemize}
%			\item Dallas Mavericks
%			\item Houston Rockets
%			\item Memphis Grizzlies
%			\item New Orleans Pelicans
%			\item San Antonio Spurs
%		\end{itemize}
%		\item Pacific Division
%		\begin{itemize}
%			\item Golden State Warriors
%			\item Los Angeles Clippers
%			\item Los Angeles Lakers
%			\item Phoenix Suns
%			\item Sacramento Kings
%		\end{itemize}
%	\end{itemize}
%\end{itemize} 
\\\\
\begin{tabular}{ |p{5cm}|p{5cm}|p{5cm}|  }
	\hline
	\multicolumn{3}{|c|}{Konferencja Wschodnia} \\
	\hline
	Atlantic Division& Southeast Division&Central Division\\
	\hline
	Boston Celtics& Atlanta Hawks &Chicago Bulls\\
	Brooklyn Nets (dawniej New Jersey Nets)&Charlotte Hornets (dawniej Charlotte Bobcats)&Cleveland Cavaliers\\
	New York Knicks &Miami Heat &Detroit Pistons\\
	Philadelphia 76ers&Orlando Magic &Indiana Pacers\\
	Toronto Raptors&Washington Wizards&Milwaukee Bucks\\
	\hline
\end{tabular}
\\\\\\
\begin{tabular}{ |p{5cm}|p{5cm}|p{5cm}|  }
	\hline
	\multicolumn{3}{|c|}{Konferencja Zachodnia} \\
	\hline
	Northwest Division& Southwest Division&Pacific Division\\
	\hline
	Denver Nuggets& Dallas Mavericks &Golden State Warriors\\
	Minnesota Timberwolves&Houston Rockets &Los Angeles Clippers\\
	Oklahoma City Thunder (dawnej Seattle SuperSonics)&Memphis Grizzlies &Los Angeles Lakers\\
	Portland Trail Blazers&New Orleans Pelicans &Phoenix Suns\\
	Utah Jazztors&San Antonio Spurs&Sacramento Kings\\
	\hline
\end{tabular}
\\

Sezon w NBA składa się z dwóch części: zasadniczej i następującej po niej pucharowej (playoffs). W sezonie zasadniczym każda drużyna rozgrywa 82 mecze, grając z każdym innym zespołem od 2 do 4 gier. Terminarz wyznaczany jest wedle następujących reguł:
\begin{enumerate}
	\item drużyny z różnych konferencji grają ze sobą 2 spotkania (1 na wyjedzie i 1 na własnym boisku),
	\item drużyny z tej samej dywizji grają ze sobą 4 spotkania (2 na wyjedzie i 2 na własnym boisku),
	\item drużyny z tej samej konferencji oraz różnych dywizji grają ze sobą 3 albo 4 spotkania (przynajmniej po jednym na wyjedzie i własnym boisku).
\end{enumerate}
Mecze koszykówki nie mogą zakończyć się remisem (w razie remisu po regulaminowym czasie gry rozgrywa się dogrywki aż do wyłonienia zwycięzcy).
Po zakończeniu sezonu następuje wspomniana wyżej faza pucharowa; wchodzi do niej po 8 najlepszych zespołów z każdej konferencji (w razie takiej samej ilości zwycięstw dla obu zespołów decydują mecze bezpośrednie pomiędzy nimi). W tej fazie drużyny grają ze sobą maksymalnie 7 meczów, czyli zespół, który pierwszy wygra 4 mecze, przechodzi do następnego etapu. W fazie Playoff jasno zdefiniowane są lokalizacje odgrywania spotkań --- lepszy bilans zwycięstw w sezonie zasadniczym skutkuje przewagą parkietu. Seria spotkań grana jest w formacie 2–2–1–1–1, czyli mecze numer 1, 2, 5 i 7 grane są u lepszej z drużyn. Przy doborze przeciwników w tej fazie bierze się pod uwagę pozycję w tabeli konferencji: drużyna z miejsca pierwszego gra z zespołem o ósmym bilansie w danej konferencji, druga z siódmą, i tak dalej. Zwycięzca serii przechodzi do następnego etapu z czterema drużynami, po którym następują finały konferencji --- najlepsze drużyny ze swoich konferencji spotykają się w finałach NBA. Dla lepszego zrozumienia systemu rozgrywek Playoff ZAMIESZCZONO DRZEWKO PONIŻEJ!!!!!!!!!!!!! 

\chapter{Teoria, matematyka}
Monte Carlo, rozkład jednostajny, bootstrap, rozkład, estymacja, metod nieparametryczne, boxplot, dystrybuanta, wartość oczekiwana?
test shapiro-wilka, gęstość rozkładu, rozklad normalny, qqplot?

\section{Zasada bootstrap}


\chapter{Metodologia, algorytmy}
Czy znając wyniki zakończonych rozgrywek jesteśmy w stanie przewidzieć rezultaty przyszłych zawodów?
\\
Dane, które będziemy wykorzystywać do symulacji sezonu zostały zebrane ze strony besketballreference.com i przerobione w odpowiedni sposób CZY MAM PODAWAĆ TRANSFORMACJE DANYCH, JAK DO TEGO DOSZŁO?
\\
Na potrzeby tej pracy zebrano wyniki starć pomiędzy drużynami począwszy od sezonu 2004/2005 aż do 2017/2018. Początkowo symulowano rozgrywki w sezonie 2014/2015 w celu wybrania najlepszego modelu, a następnie skorzystano z niego, aby przewidzieć wyniki rozgrywek we wciąż trwającym sezonie 2018/2019.
Posiadając ilość wygranych jednej drużyny z drugą na przestrzeni lat dokonano następujących transformacji danych:
\\
W zależności od interwału czasowego, jaki będziemy rozpatrywać, zebrano wyniki w określonych rozgrywkach (na przykład, przy wyznaczaniu wyników sezony 2014/2015 i interwale 5 lat, używać będziemy danych z lat 2009 do 2014). Dzięki uzyskanej w ten sposób liczbie wygranych w możemy stosunek zwycięstw do porażek dla wybranych zespołów (załóżmy, że Boston Celtics i Atlanta Hawks grali ze sobą 10 razy, Jastrzębie wygrały zaledwie 4 razy, dlatego też w starciu z Celtami jej stosunek wygranych do przegranych wynosi $0.4$). Po zastosowaniu tej metody dla wszystkich zespołów uzyskamy macierz o rozmiarze 30 wierszy i kolumn zawierającą prawdopodobieństwa na wygraną z każdym zespołem w lidze.
\\
Podczas symulacji program przechodzi przez terminarz rozgrywek --- drużyna gra z przeciwnikiem tyle razy, ile spotkań wyznaczono w rozkładzie. Algorytmy losowania opisano szczegółowo w ROZDZIALE Z MODELAMI
\\
Z powodu losowości w rozkładzie sezonu (drużyny z jednej konferencji grające ze sobą 3 albo 4 razy w zależności od sezonu) skorzystano z gotowych terminarzy dla symulowanych sezonów.
\\


\section{Model uśredniony}
Pierwszy ze stworzonych modeli polega na obliczeniu ogólnego stosunku zwycięstw do porażek dla każdej drużyny w wybranym okresie --- wszystkie wygrane zespołu zostają podzielone przez łączną liczbę rozegranych spotkań, wynikiem czego jest liczba z przedziału $[0,1]$ określana jako $P_{i}$, gdzie $i$ to $i-$ta drużyna. Algorytm symulowania wyników spotkań między drużynami wygląda następująco:
\begin{enumerate}
	\item wstaw $i=1$
	\begin{enumerate}
		\item wstaw $j=i$
		\item znajdź drużyny $D_i$ i $D_j$
		\item odczytaj średnie ilości zwycięstw $W_i$ i $W_j$ dla drużyn $D_i$ i $D_j$ 
		\item wyznacz prawdopodobieństwo zwycięstwa $W_{ij}$ przez drużynę  $D_i$ równe $W_{ij}=\frac{W_i}{W_i + W_j}$   
		\item w terminarzu znajdź liczbę spotkań $S_{ij}$ pomiędzy drużynami $D_i$ i $D_j$
			\begin{enumerate}
				\item symuluj liczbę $U$ z rozkładu jednostajnego $U\sim U[0,1]$ 
			\item jeżeli $W_{ij} \leq U,$ to zwiększ licznik zwycięstw drużyny $D_i$, w przeciwnym razie zwiększ licznik zwycięstw drużyny $D_j$
			\item powtórz $S_{ij}$ razy
			\end{enumerate}
		\item wstaw $j=j+1$
	\end{enumerate}
	\item wstaw $i=i+1$
	\item jeżeli $i> 30$, to zakończ algorytm
\end{enumerate} 

\section{Model rywalizacji}
Drugi z zaproponowanych modeli zakłada zwracanie uwagi na historyczne wyniki przeciwko konkretnej drużynie. W zawodowym sporcie niejednokrotnie można trafić na zażarte rywalizacje między dwoma klubami lub zwykłą łatwość w pokonaniu szczególnego przeciwnika. Algorytm symulowania wyników spotkań między drużynami wygląda następująco:
\begin{enumerate}
	\item wstaw $i=1$
	\begin{enumerate}
		\item wstaw $j=i$
		\item znajdź drużyny $D_i$ i $D_j$
		\item odczytaj z macierzy wyników stosunek zwycięstw $W_{ij}$ drużyny $D_i$ przeciw drużynie $D_j$   
		\item w terminarzu znajdź liczbę spotkań $S_{ij}$ pomiędzy drużynami $D_i$ i $D_j$
		\begin{enumerate}
			\item symuluj liczbę $U$ z rozkładu jednostajnego $U\sim U[0,1]$ 
			\item jeżeli $W_{ij} \leq U,$ to zwiększ licznik zwycięstw drużyny $D_i$, w przeciwnym razie zwiększ licznik zwycięstw drużyny $D_j$
			\item powtórz $S_{ij}$ razy
		\end{enumerate}
		\item wstaw $j=j+1$
	\end{enumerate}
	\item wstaw $i=i+1$
	\item jeżeli $i> 30$, to zakończ algorytm
\end{enumerate} 

\section{Model symulacji fazy pucharowej}
Po symulacji całego sezonu, czyli 1230 spotkań, 8 najlepszych drużyn z każdej konferencji przechodzi do fazy Playoff, gdzie toczy rozgrywki zgodnie z systemem opisanym we WSTĘPIE. Na tym etapie rozgrywek symulacja spotkań różni się od części zasadniczej: zamiast jednego z zasugerowanych wcześniej modeli korzysta się ze wcześniejszej symulacji fazy zasadniczej. W celu oddania trendów panujących w wygenerowanych rozgrywkach (a mianowicie potencjalnych kontuzjach, spadkach lub zwyżkach formy), użyta zostaje jedynie informacja o ilości wygranych przed rozpoczęciem Playoffów. Algorytm symulowania tej fazy jest postaci:
\begin{enumerate}
	\item wybierz drużyny $D_i$ i $D_j$
	\item odczytaj symulowane ilości zwycięstw $W_i$ i $W_j$ dla wybranych drużyn $D_i$ i $D_i$
	\item wyznacz prawdopodobieństwo zwycięstwa $W_{ij}$ przez drużynę  $D_i$ równe $W_{ij}=\frac{W_i}{W_i + W_j}$ 
	\item wstaw liczniki zwycięstw $Z_i=0$ i $Z_j=0$ 
		\begin{enumerate}
			\item symuluj liczbę $U$ z rozkładu jednostajnego $U\sim U[0,1]$ 
			\item jeżeli $W_{ij} \leq U,$ wstaw $Z_i=Z_i+1$, w przeciwnym razie wstaw $Z_j=Z_j+1$
			\item powtarzaj dopóki  $Z_i=4$ lub $Z_j=4$
		\end{enumerate}
	\item jeżeli $Z_i=4$, to przenieś drużynę $D_i$ do następnego etapu, w przeciwnym razie przenieś drużynę $D_j$
	
\end{enumerate} 

\chapter{Wyniki, porownanie modeli}
modelowanie okresem, sezonem, wagami, długością próbki?
symulacja dla 2018-19?
\chapter{Wnioski}
gęstości symulacji powinny mieć rozkład normalny?

{\backmatter \chapter{Podsumowanie}}
%Podsumowanie w pracach matematycznych nie jest obligatoryjne. Warto jednak na zakończenie krótko napisać, co udało nam się zrobić w pracy, a czasem także o tym, czego nie udało się zrobić.

{\backmatter \chapter{Dodatek}}
tabele z prawdopodobieństwami, terminarz sezonu
%Dodatek w pracach matematycznych również nie jest wymagany. Można w nim przedstawić np. jakiś dłuższy dowód, który z pewnych przyczyn pominęliśmy we właściwej części pracy lub (np. w przypadku prac statystycznych) umieścić dane, które analizowaliśmy.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% BIBLIOGRAFIA
% W tworzeniu bibliografii najlepiej korzystać z BibTex'a, 
% który jest częścią systemu Tex. W naszym przypadku funkcję 
% przechowalni literatury, do której się odwołujemy, pełni 
% plik bibliografia.bib. Nie musimy ręcznie dodawać nowych 
% pozycji do bibliografii. Możemy wejść np. na stronę 
% https://mathscinet.ams.org/mathscinet/index.html, 
% znaleźć odpowiednią pozycję, wybrać ją, a następnie zmienić 
% 'Select alternative format' na BibTeX, skopiować uzyskany 
% tekst, wkleić do pliku bibliografia.bib i skompilować. 
% Gotowe informacje do pliku bibliografia.bib można znaleźć 
% także na https://arxiv.org - gdy znajdziemy interesującą nas 
% pracę, szukamy 'References & Citations' i klikamy 'NASA ADS', 
% a potem 'Bibtex entry for this abstract' 
% i postępujemy tak jak wcześniej.
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\newpage
% w nawiasie klamrowym wpisujemy nazwę pliku z bibliografią w formacie .bib
\bibliografia{bibliografia} 
\end{document}